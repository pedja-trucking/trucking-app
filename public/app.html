<!doctype html>
<html>
<head><meta charset="utf-8"><title>App</title></head>
<body>
  <h2>Trucking Assistant â€” App</h2>
  <div id="me">Loading...</div>
  <button id="logout">Logout</button>

<script>
async function loadMe(){
  const r = await fetch('/api/me', { credentials: 'include' });
  if (r.status === 200) {
    const j = await r.json();
    document.getElementById('me').innerText = 'Logged as: ' + j.user.email + ' (' + (j.user.username || '') + ')';
  } else {
    window.location = '/login.html';
  }
}
document.getElementById('logout').onclick = async () => {
  await fetch('/api/logout', { method: 'POST', credentials: 'include' });
  window.location = '/login.html';
};
loadMe();
</script>
</body>
</html>
